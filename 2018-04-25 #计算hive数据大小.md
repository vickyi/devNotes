# 计算Hive表数据大小

## 查表表信息的基本命令

### 查看表的最详细信息

```shell
hive> desc formatted tableName;
```

### 查看表中数据大小

```shell
hive> dfs -du -s -h  /path/to/table
```

### 应用示例

```shell
## 查看详细的表结构信息
desc formatted dw.fct_event_reg;

## 统计整个目录的数据大小
hive> dfs -du -s -h hdfs://nameservice1/user/hive/warehouse/dw.db/fct_event_reg;
1.5 T  4.4 T  hdfs://nameservice1/user/hive/warehouse/dw.db/fct_event_reg


## 统计子目录的数据大小
hive> dfs -du -h hdfs://nameservice1/user/hive/warehouse/dw.db/fct_event_reg;
....
297.5 M   892.4 M   hdfs://nameservice1/user/hive/warehouse/dw.db/fct_event_reg/date=2018-05-12
309.2 M   927.6 M   hdfs://nameservice1/user/hive/warehouse/dw.db/fct_event_reg/date=2018-05-13
336.4 M   1009.1 M  hdfs://nameservice1/user/hive/warehouse/dw.db/fct_event_reg/date=2018-05-14
340.6 M   1021.9 M  hdfs://nameservice1/user/hive/warehouse/dw.db/fct_event_reg/date=2018-05-15
340.9 M   1022.7 M  hdfs://nameservice1/user/hive/warehouse/dw.db/fct_event_reg/date=2018-05-16
```

## 实战：计算abcplus事业部数据大小

```shell
hive> dfs -du -h /user/hive/ods/ods_*;
-- 输出的是到分区的文件夹的占用

hive> dfs -du -s -h /user/hive/ods/ods_*;
-- 输出的是到ods_开头的文件夹的空间占用
-- 107.7G

hive> dfs -du -s -h /user/hive/ods/rt_abc_*;
52.7 K  158.2 K  /user/hive/ods/rt_abc_admin
189.8 K  569.4 K  /user/hive/ods/rt_abc_business_info
6.1 M  18.2 M  /user/hive/ods/rt_abc_goods
8.8 M  26.3 M  /user/hive/ods/rt_abc_goods_attribute
223.7 K  671.1 K  /user/hive/ods/rt_abc_goods_brand
2.7 M  8.2 M  /user/hive/ods/rt_abc_goods_extend
18.2 M  54.5 M  /user/hive/ods/rt_abc_goods_sku
621.1 M  1.8 G  /user/hive/ods/rt_abc_inventory_log
181.7 K  545.0 K  /user/hive/ods/rt_abc_mix_sku_relation
0  0  /user/hive/ods/rt_abc_order_activity_relation
10.0 G  29.9 G  /user/hive/ods/rt_abc_order_express
1.2 G  3.7 G  /user/hive/ods/rt_abc_order_goods
984.9 M  2.9 G  /user/hive/ods/rt_abc_order_info
682.3 M  2.0 G  /user/hive/ods/rt_abc_order_main
-- 40.3G

hive> dfs -du -s -h /user/hive/warehouse/base.db/abc_*;
30.3 G  90.8 G  /user/hive/warehouse/base.db/abc_bootstrap_log
2.8 G  8.5 G  /user/hive/warehouse/base.db/abc_event_log
8.3 G  24.9 G  /user/hive/warehouse/base.db/abc_pageinfo_log
-- 124.2G

### 磁盘总占用：272.2G

```